<!DOCTYPE html>
<html>

<head>
    <title> Calculator </title>
    <meta charset='UTF-8'>
    <link rel='stylesheet' href='reset.css'>
    <link rel='stylesheet' href='style.css'>
</head>

<body>
    <div id='header'>
        <p class='title'> ~ Bluehiperspace8's JavaScript Calculator ~ </p>
    </div>
    <div id='calculator-body'>
        <div class='calculator-display'>
            <p id='operations'></p>
            <p id='result' ></p>
        </div>
        <div class='calculator-buttons'>
            <button id='reset' class='control'>AC</button>
            <button id='backspace' class='control'> DEL </button>
            <button id='sign' class='control'> + / - </button>
            <button id='divide' class='literal operator'> รท </button>
            <button class='literal number'>7</button>
            <button class='literal number'>8</button>
            <button class='literal number'>9</button>
            <button id='times' class='literal operator'> x </button>
            <button class='literal number'>4</button>
            <button class='literal number'>5</button>
            <button class='literal number'>6</button>
            <button id='minus' class='literal operator'> - </button>
            <button class='literal number'>1</button>
            <button class='literal number'>2</button>
            <button class='literal number'>3</button>
            <button id='plus' class='literal operator'> + </button>
            <button class='literal number double'>0</button>
            <button class='literal number'>.</button>
            <button id='equal' class='operator'> = </button>
        </div>
    </div>
<script>
    //let operator;
    const add = (first, second) => first + second;
    const substract = (first, second) => first - second;
    const multiply = (first, second) => first * second;
    const divide = (first, second) => first / second;
    function operate(operator, first, second) {
        let outcome;
        switch(operator) {
            case '+':
                return outcome = add(first, second);
            case '-':
                return outcome = substract(first, second);
            case 'x':
                return outcome = multiply(first, second);
            case 'รท':
                return outcome = divide(first, second);
        }
    }
    const operationArea = document.getElementById('operations');
    const resultArea = document.getElementById('result');

    const numberButtons = document.getElementsByClassName('literal');
    for(let i = 0; i < numberButtons.length; i++) {
        numberButtons[i].addEventListener('click', (e) => {
            operationArea.textContent += e.target.textContent;
        })
    }

    const resetButton = document.getElementById('reset');
    resetButton.addEventListener('click', () => {
        operationArea.textContent = undefined;
        resultArea.textContent = undefined;
    })

    const backButton = document.getElementById('backspace');
    backButton.addEventListener('click', () => {
        let text = operationArea.textContent;
        text = text.substring(0, text.length - 1);
        operationArea.textContent = text;
    })

    const plusButton = document.getElementById('plus');
    plusButton.addEventListener('click', () => {
        operator = 'add';
    })

    const minusButton = document.getElementById('minus');
    minusButton.addEventListener('click', () => {
        operator = 'substract';
    })

    const timesButton = document.getElementById('times');
    timesButton.addEventListener('click', () => {
        operator = 'multiply';
    })

    const divideButton = document.getElementById('divide');
    divideButton.addEventListener('click', () => {
        operator = 'divide';
    })

    const equalButton = document.getElementById('equal');
    equalButton.addEventListener('click', () => {
        /*let text;
        let values;
        let first;
        let second;
        let outcome;
        switch(operator) {
            case 'add':
                text = operationArea.textContent;
                values = text.split(' + ');
                first = Number(values[0]);
                second = Number(values[1]);
                outcome = add(first, second);
                resultArea.textContent = outcome;
                break
            case 'substract':
                text = operationArea.textContent;
                values = text.split(' - ');
                first = Number(values[0]);
                second = Number(values[1]);
                outcome = substract(first, second);
                resultArea.textContent = outcome;
                break
            case 'multiply':
                text = operationArea.textContent;
                values = text.split(' x ');
                first = Number(values[0]);
                second = Number(values[1]);
                outcome = multiply(first, second);
                resultArea.textContent = outcome;
                break
            case 'divide':
                text = operationArea.textContent;
                values = text.split(' รท ');
                first = Number(values[0]);
                second = Number(values[1]);
                outcome = divide(first, second);
                resultArea.textContent = outcome;
                break
        }
    })*/

    let first;
    let second;
    let operator;
    let outcome;
    let start;
    let finish;
    let operation = operationArea.textContent;
    let operationArray = operation.split('');
    console.log(operationArray);
    for(let i = 0; i < operationArray.length; i++) {
        if(operationArray[i] == 'x' || operationArray[i] == 'รท') {
            for(let k = i - 2; k > -1; k--) {
                if(operationArray[k] == ' ') {
                    first = Number(operationArray.slice(k + 1, i - 1).join(''));
                    start = k + 1;
                    break
                }
                if(k == 0) {
                    first = Number(operationArray.slice(k, i - 1).join(''));
                    start = 0;
                    break
                }
            }
            for(k = i + 2; k < operationArray.length; k++) {
                if(operationArray == ' ') {
                    second = Number(operationArray.slice(i + 2, k).join(''));
                    finish = k - 1;
                    break
                }
                if(k == operationArray.length - 1) {
                    second = Number(operationArray.slice(i + 2).join(''));
                    finish = k;
                    break
                }
            }
            operator = operationArray[i];
            outcome = operate(operator, first, second);
            operationArray.splice(start, finish - start + 1, outcome);
            console.log(operationArray)
        }
    }
    });
</script>
</body>

</html>